import{d as F,u as j,m as h,p as q,f as z,J as A,g,w as y,_ as D,o,a as e,C as L,c as n,h as T,i as k,v as x,j as t,n as _,k as w,t as p,l as C,z as E,F as U,s as $,A as G}from"./index-5abe8877.js";import{u as J,a as N,c as V}from"./index.esm-17442b30.js";const P={class:"container"},R=e("div",{class:"py-4"},[e("h4",{class:"text-center mb-4"},"Мой профиль")],-1),H={key:1,class:"profile"},I={class:"row justify-content-center"},K={class:"col-md-6"},O={class:"mb-3"},Q=e("label",{for:"inputEmail",class:"form-label"},"Email",-1),W={key:0,class:"form-text text-danger"},X={class:"mb-3"},Y=e("label",{for:"inputName",class:"form-label"},"Имя",-1),Z={key:0,class:"form-text text-danger"},ee={class:"mb-3"},se={class:"mb-3"},te=e("button",{type:"submit",class:"btn btn-primary mt-3"}," Сохранить ",-1),ie=F({__name:"Profile",setup(ae){const v=j(),r=h(!1),d=q(()=>v.getters["auth/user"]),u=h([]),{handleSubmit:M}=J(),{value:i,errorMessage:c}=N("email",V().trim().required("Пожалуйста, введите email").email("Необходимо ввести корректный email")),{value:l,errorMessage:m}=N("name",V().trim().required("Пожалуйста, введите имя").min(5,"Имя не может быть меньше 5 символов"));z(async()=>{r.value=!0,i.value=d.value.email,l.value=d.value.name,u.value=d.value.roles,r.value=!1});const f=M(async b=>{try{await v.dispatch("auth/update",{...b,role:u.value[0]})}catch{}});return(b,a)=>{const S=A("router-link");return o(),g(D,{title:"Мой профиль"},{default:y(()=>[e("div",P,[R,r.value?(o(),g(L,{key:0})):(o(),n("div",H,[e("div",I,[e("div",K,[e("form",{onSubmit:a[2]||(a[2]=T((...s)=>t(f)&&t(f)(...s),["prevent"]))},[e("div",O,[Q,k(e("input",{type:"email",class:_(["form-control",{"is-invalid":t(c)}]),id:"inputEmail","onUpdate:modelValue":a[0]||(a[0]=s=>w(i)?i.value=s:null)},null,2),[[x,t(i)]]),t(c)?(o(),n("div",W,p(t(c)),1)):C("",!0)]),e("div",X,[Y,k(e("input",{type:"text",class:_(["form-control",{"is-invalid":t(m)}]),id:"inputName","onUpdate:modelValue":a[1]||(a[1]=s=>w(l)?l.value=s:null)},null,2),[[x,t(l)]]),t(m)?(o(),n("div",Z,p(t(m)),1)):C("",!0)]),e("div",ee,[E(" Уровень доступа: "),(o(!0),n(U,null,$(u.value,(s,B)=>(o(),n("span",{key:B,class:_(["badge","fw-normal",{"bg-danger":s=="admin"},{"bg-primary":s=="user"},{"bg-warning":s=="god"}])},p(s=="admin"?"Администратор":s=="user"?"Пользователь":s=="god"?"God":""),3))),128))]),e("div",se,[G(S,{to:"/password"},{default:y(()=>[E("Сменить пароль")]),_:1})]),te],32)])])]))])]),_:1})}}});export{ie as default};
