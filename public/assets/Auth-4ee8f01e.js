import{d as M,c as _,a as e,r as $,o as i,u as C,b as D,e as O,f as q,g as B,w as N,h as T,i as h,v as b,j as s,n as v,k as g,t as y,l as S}from"./index-5abe8877.js";import{_ as V}from"./logo-200-515ad0a9.js";import{u as A,a as w,c as x}from"./index.esm-17442b30.js";const k={SOME_CODE:"Пользователь с таким email не был найден",auth:"Пожалуйста, войдите в систему"};function F(o){return k[o]?k[o]:"Неизвестная ошибка"}const H={class:"container"},I={class:"row"},L=M({__name:"AppSystemPage",props:{title:{}},setup(o){const r=o;return document.title=`${r.title} | Новые технологии`,(l,n)=>(i(),_("div",H,[e("div",I,[$(l.$slots,"default")])]))}}),P={class:"auth mx-auto"},U=e("img",{class:"mx-auto d-block mb-5",src:V,alt:""},null,-1),j={class:"auth-card p-3 card"},z={class:"mb-3"},G={class:"form-floating mb-1"},W=e("label",{for:"email",class:"form-label"},"Email",-1),J={key:0,class:"form-text text-danger mb-3"},K={class:"mb-3"},Q={class:"form-floating mb-1"},X=e("label",{for:"password",class:"form-label"},"Пароль",-1),Y={key:0,class:"form-text text-danger mb-3"},Z=e("button",{type:"submit",class:"btn btn-primary"},"Войти",-1),E=7,oe=M({__name:"Auth",setup(o){const r=C(),l=D(),n=O(),{handleSubmit:R}=A(),{value:c,errorMessage:m}=w("email",x().trim().required("Пожалуйста, введите email").email("Необходимо ввести корректный email")),{value:d,errorMessage:u}=w("password",x().trim().required("Пожалуйста, введите пароль").min(E,`Пароль не может быть меньше ${E} символов`));q(()=>{localStorage.getItem("token")&&n.push("/")}),l.query.message&&r.dispatch("setMessage",{value:F(l.query.message),type:"warning"});const f=R(async p=>{try{await r.dispatch("auth/login",p),n.push("/")}catch{}});return(p,t)=>(i(),B(L,{title:"Авторизация"},{default:N(()=>[e("div",P,[U,e("div",j,[e("form",{onSubmit:t[2]||(t[2]=T((...a)=>s(f)&&s(f)(...a),["prevent"]))},[e("div",z,[e("div",G,[h(e("input",{type:"email",class:v(["form-control",{"is-invalid":s(m)}]),id:"email","aria-describedby":"emailHelp",placeholder:"name@example.com","onUpdate:modelValue":t[0]||(t[0]=a=>g(c)?c.value=a:null)},null,2),[[b,s(c)]]),W]),s(m)?(i(),_("div",J,y(s(m)),1)):S("",!0)]),e("div",K,[e("div",Q,[h(e("input",{type:"password",class:v(["form-control",{"is-invalid":s(u)}]),id:"password",placeholder:"Пароль","onUpdate:modelValue":t[1]||(t[1]=a=>g(d)?d.value=a:null)},null,2),[[b,s(d)]]),X]),s(u)?(i(),_("div",Y,y(s(u)),1)):S("",!0)]),Z],32)])])]),_:1}))}});export{oe as default};
